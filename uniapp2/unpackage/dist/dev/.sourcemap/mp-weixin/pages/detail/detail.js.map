{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?9d15","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?2da2","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?a0ab","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?e144","uni-app:///pages/detail/detail.vue","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?2987","webpack:///C:/Users/asus/Desktop/uniapp2/pages/detail/detail.vue?28da"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0IpnB;AACA;AACA;AACA;AACA;AACA,yB;AACA;AACA,QADA,kBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAlBA;AAmBA,MAnBA,kBAmBA;AACA;AACA;AACA,mBAFA;AAGA;AACA,iBAJA;AAKA;AACA,qBANA;AAOA;AACA,iBARA;AASA;AACA,iBAVA;AAWA;AACA,mBAZA;AAaA;AACA,qBAdA;AAeA;AACA,kBAhBA;AAiBA;AACA,wBAlBA;AAmBA;AACA,mBApBA;AAqBA;AACA,yBAtBA;AAuBA;AACA,sBAxBA;AAyBA;AACA,eA1BA;AA2BA,iBA3BA;;AA6BA,GAjDA;AAkDA;AACA,YADA,sBACA;AACA;AACA;AACA,uBADA;;AAGA;AACA,0EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KAvBA;AAwBA;AACA,uBAzBA,+BAyBA,CAzBA,EAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhDA;AAiDA;AACA,kBAlDA,0BAkDA,CAlDA,EAkDA;AACA;AACA;AACA,KArDA;AAsDA;AACA,oBAvDA,4BAuDA,CAvDA,EAuDA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5EA;AA6EA;AACA,sBA9EA,8BA8EA,CA9EA,EA8EA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApGA;AAqGA;AACA,mBAtGA,2BAsGA,OAtGA,EAsGA,SAtGA,EAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9GA;AA+GA;AACA,eAhHA,yBAgHA;AACA;AACA,gGADA;AAEA;AACA;AACA;AACA;AACA,SANA;;AAQA,KAzHA;AA0HA;AACA,WA3HA,mBA2HA,IA3HA,EA2HA,MA3HA,EA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAFA;AAGA,wBAHA;;AAKA,KArIA;AAsIA;AACA,mBAvIA,6BAuIA;AACA;AACA;AACA;AACA,iBAFA;;AAIA,KA7IA;AA8IA;AACA,mBA/IA,6BA+IA;AACA;AACA,0FADA;AAEA;AACA;AACA;AACA,SALA;;AAOA,KAvJA;AAwJA;AACA,iBAzJA,2BAyJA;AACA;AACA;AACA,wGADA;AAEA;AACA;AACA;AACA,SALA;;AAOA,KAlKA;AAmKA;AACA,iBApKA,2BAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA;AAEA;AACA;AACA,SAJA;;AAMA,KAhLA,EAlDA,E;;;;;;;;;;;;AChJA;AAAA;AAAA;AAAA;AAA04B,CAAgB,24BAAG,EAAC,C;;;;;;;;;;;ACA95B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/detail/detail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=3e159eb4&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=3e159eb4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e159eb4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail/detail.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=3e159eb4&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = Object.keys(_vm.allData)\n  var l0 = _vm.allData.vo\n    ? _vm.__map(_vm.allData.vo.colorList, function(item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var m0 = _vm.disabledHandler(item.characterValueId, _vm.versionId)\n        return {\n          $orig: $orig,\n          m0: m0\n        }\n      })\n    : null\n  var l1 = _vm.allData.vo\n    ? _vm.__map(_vm.allData.vo.versionList, function(item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var m1 = _vm.disabledHandler(_vm.colorId, item.characterValueId)\n        return {\n          $orig: $orig,\n          m1: m1\n        }\n      })\n    : null\n  var g1 = Object.keys(_vm.allData)\n  var g2 = Object.keys(_vm.allData)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.moveToPosition = \"go-top\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.moveToPosition = \"go-com-box\"\n    }\n\n    _vm.e2 = function($event) {\n      _vm.moveToPosition = \"go-pra-box\"\n    }\n\n    _vm.e3 = function($event) {\n      _vm.moveToPosition = \"go-recommend\"\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        l1: l1,\n        g1: g1,\n        g2: g2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n    <div>\r\n        <scroll-view scroll-y=\"true\" :style=\"{height: windowHeight + 'px'}\" :scroll-with-animation=\"animation\"\r\n            :scroll-into-view=\"moveToPosition\" @scroll=\"scrollChangeHandler($event)\">\r\n            <!-- 固定定位 -->\r\n            <div class=\"fixed-bar\" :class=\"{'bar-o':scrollTop > 170,'bar-p':scrollTop > 10}\">    \r\n                <div class=\"bar-ct\">\r\n                    <!-- 返回箭头 -->\r\n                    <div class=\"bar-reutrn\" @click=\"returnHandler()\"></div>\r\n                    <span @click=\"moveToPosition = 'go-top'\">商品</span>\r\n                    <span @click=\"moveToPosition = 'go-com-box'\">评价</span>\r\n                    <span @click=\"moveToPosition = 'go-pra-box'\">详情</span>\r\n                    <span @click=\"moveToPosition = 'go-recommend'\">推荐</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"details\">\r\n                <!-- 如果不写 v-if=\"allData.pics\"，上来会是1/undefined。 -->\r\n                <div id=\"go-top\" class=\"swiper-box\" v-if=\"allData.pics\">\r\n                    <!-- 轮播图 -->\r\n                    <swiper class=\"swiper-box\" indicator-dots=\"true\" indicator-active-color=\"red\" circular=\"true\"\r\n                        :duration=\"duration\" @change=\"currentHandler($event)\" :current=\"nowIndex\"\r\n                        indicator-color=\"white\">\r\n                        <block :class=\"{transition: nowIndex == 0}\" v-for=\"(item,index) in allData.pics\" :key=\"index\">\r\n                            <swiper-item>\r\n                                <image :src=\"`http://www.zkt-it.com:5050/pic/product/${item}?format=900w_900h_1e_0l`\"\r\n                                    mode=\"\"></image>\r\n\r\n                            </swiper-item>\r\n                        </block>\r\n                    </swiper>\r\n                    <div class=\"page-pt\">\r\n                        {{nowIndex + 1}} / {{allData.pics.length}}\r\n                    </div>\r\n                </div>\r\n                <!-- 这里不能写v-if=\"allData\",那样一样会在Ajax拉取之前显示undefined,因为allData是一个空对象，一样会认为是true，因而要写v-if=\"Object.keys(allData).length != 0\" -->\r\n                <div class=\"nps-box\" v-if=\"Object.keys(allData).length != 0\">\r\n                    <div class=\"p-name\">\r\n                        {{allData.pName}}\r\n                    </div>\r\n                    <div class=\"price\">\r\n                        <span>￥</span>{{allData.price}}\r\n                    </div>\r\n                    <div class=\"shop-name\">\r\n                        {{allData.shopName}}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 商品颜色和型号 -->\r\n                <div id=\"go-com-box\" class=\"color-model\" v-if=\"allData.vo\">\r\n                    <div class=\"cm-son\">\r\n                        <div class=\"cm-c\">颜色</div>\r\n                        <div class=\"cm-for\"\r\n                            :class=\"{'bind-color': colorId == item.characterValueId, disabled:disabledHandler(item.characterValueId, versionId)}\"\r\n                            v-for=\"(item,index) in allData.vo.colorList\" :key=\"index\"\r\n                            @click=\"bindColorHandler(item.characterValueId)\">\r\n                            {{item.characterValueName}}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"cm-son\">\r\n                        <div class=\"cm-m\">型号</div>\r\n                        <div class=\"cm-for\"\r\n                            :class=\"{'bind-color': versionId == item.characterValueId, disabled:disabledHandler(colorId, item.characterValueId)}\"\r\n                            v-for=\"(item,index) in allData.vo.versionList\" :key=\"index\"\r\n                            @click=\"bindVersionHandler(item.characterValueId)\">\r\n                            {{item.characterValueName}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 商品评价 -->\r\n                <div id=\"go-pra-box\" class=\"comment-box\" v-if=\"Object.keys(allData).length != 0\">\r\n                    <div class=\"cb\">\r\n                        <div>评论</div>\r\n                        <div class=\"cb-r\" @click=\"loadMoreComment()\">加载更多<span>&gt;&gt;</span></div>\r\n                    </div>\r\n                    <div class=\"com-box\" v-for=\"(item,index) in commentData\" :key=\"index\">\r\n                        <div class=\"hpn\">\r\n                            <div class=\"head-portrait\">\r\n                                <image\r\n                                    :src=\"`http://www.zkt-it.com:5050/pic/comment/${item.avatar}?format=950w_950h_1e_0l`\"\r\n                                    mode=\"\"></image>\r\n                            </div>\r\n                            <div>\r\n                                <div class=\"nick-name\">\r\n                                    {{item.nickName}}\r\n                                </div>\r\n                                <div class=\"star\" :style=\"{'background-position': -(5 - item.score) * 16 + 'px 0px'}\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"content\">\r\n                            {{item.content}}\r\n                        </div>\r\n                        <div class=\"pics\">\r\n                            <div v-for=\"(item2,index2) in item.pics\" :key=\"index2\">\r\n                                <image :src=\"`http://www.zkt-it.com:5050/pic/comment/${item2}?format=950w_950h_1e_0l`\"\r\n                                    mode=\"aspectFill\" @click=\"bigPics(item.pics, item2)\"></image>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 商品详情 -->\r\n                <div class=\"shop-particulars\" v-if=\"particularsPics.length != 0\">\r\n                    <div class=\"minutiae\">详情</div>\r\n                    <div class=\"sp-pics\" v-for=\"(item,index) in particularsPics\" :key=\"index\">\r\n                        <image :src=\"`http://www.zkt-it.com:5050/pic/product/${item}?format=950w_950h_1e_0l`\"\r\n                            mode=\"widthFix\"></image>\r\n                    </div>\r\n                </div>\r\n                <!-- 推荐 ,简单写了下,没写点击跳转页面-->\r\n                <div id=\"go-recommend\" class=\"recommend\" v-if=\"Object.keys(allData).length != 0\">\r\n                    <div class=\"rec-w\">推荐</div>\r\n                    <div class=\"goods-flax\">\r\n                        <div class=\"goods\" v-for=\"item in goods\" :key=\"item.SKU\">\r\n                            <div class=\"\">\r\n                                <!-- 反引号，动态src -->\r\n                                <image\r\n                                    :src=\"`http://www.zkt-it.com:5050/pic/product/${item.thumbnail}?format=450w_450h_1e_0l`\"\r\n                                    mode=\"\"></image>\r\n                            </div>\r\n                            <div class=\"\" style=\"font-size: 12px;padding-left: 10rpx;\">\r\n                                {{item.pName}}\r\n                            </div>\r\n                            <div class=\"\" style=\"color: orange;font-size: 14px;padding-left: 10rpx;\">\r\n                                {{item.price}}元\r\n                            </div>\r\n                    </div>\r\n                    \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </scroll-view>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    // 拉取评论的节流锁\r\n    let commentLock = true;\r\n    // 拉取详情的节流锁\r\n    let particularsLock = true;\r\n    // 拉取推荐的节流锁\r\n    let recommendLock = true;\r\n    export default {\r\n        onLoad(obj) {\r\n            wx.getSystemInfo({\r\n                // 窗口高\r\n                success: (e) => {\r\n                    console.log(e);\r\n                    this.windowHeight = e.safeArea.height;\r\n                }\r\n            });\r\n            // console.log(obj);\r\n            this.detailSKU = obj.sku;\r\n            this.keyword = obj.keyword;\r\n            // this.detailSKU = '12345952857_0000000000';\r\n            // 页面跳转开锁\r\n            commentLock = true;\r\n            particularsLock = true;\r\n            recommendLock = true;\r\n            this.loadData();\r\n        },\r\n        data() {\r\n            return {\r\n                // sku\r\n                detailSKU: '',\r\n                // 所有数据\r\n                allData: {},\r\n                // 评论数据\r\n                commentData: [],\r\n                // 当前处于第几张图\r\n                nowIndex: 0,\r\n                // 颜色id\r\n                colorId: \"\",\r\n                // 版本id\r\n                versionId: \"\",\r\n                // 窗口高\r\n                windowHeight: 0,\r\n                // 向上滚动高度\r\n                scrollTop: 0,\r\n                // 点击跳转去指定位置\r\n                moveToPosition: '',\r\n                // 刷新间隔\r\n                duration: 500,\r\n                // 详情图片\r\n                particularsPics: [],\r\n                // 跳转时无过渡\r\n                animation: false,\r\n                // 推荐数据数组\r\n                goods: [],\r\n                keyword:''\r\n            }\r\n        },\r\n        methods: {\r\n            loadData() {\r\n                // 开菊花图\r\n                wx.showLoading({\r\n                    title: \"加载中...\",\r\n                });\r\n                wx.request({\r\n                    url: 'http://www.zkt-it.com:5050/product-detail/' + this.detailSKU,\r\n                    success: data => {\r\n                        console.log(data.data);\r\n                        this.allData = data.data;\r\n                        // 用从project跳转过来的sku推当前的颜色型号\r\n                        let o = this.allData.vo.mappingList.filter(item => item[2] == this.detailSKU)\r\n                        if (o.length == 1) {\r\n                            this.colorId = o[0][0];\r\n                            this.versionId = o[0][1];\r\n                        }\r\n                        // 关菊花图\r\n                        wx.hideLoading();\r\n                        // 重新加载时让轮播图每张过渡时长为500ms\r\n                        this.duration = 500;\r\n                    }\r\n                })\r\n            },\r\n            // @scroll,得到页面滚动时当前页面据顶部的高度\r\n            scrollChangeHandler(e) {\r\n                // console.log(e.detail.scrollTop);\r\n                this.scrollTop = e.detail.scrollTop;\r\n                // 只要一滚动页面就让moveToPosition(跳转去指定位置)为空\r\n                this.moveToPosition = '';\r\n                // 懒加载,当页面据顶部250时加载评论\r\n                if (commentLock && e.detail.scrollTop > 250) {\r\n                    // 关锁,一个页面只加载一次,后面换颜色型号不再加载\r\n                    commentLock = false;\r\n                    this.loadComment();\r\n                }\r\n                // 懒加载,当页面据顶部450时加载详情\r\n                if (particularsLock && e.detail.scrollTop > 450) {\r\n                    // 关锁,一个页面只加载一次,后面换颜色型号不再加载\r\n                    particularsLock = false;\r\n                    this.loadParticulars();\r\n                }\r\n                // 懒加载,当页面据顶部850时加载推荐\r\n                if (recommendLock && e.detail.scrollTop > 850) {\r\n                    // 关锁,一个页面只加载一次,后面换颜色型号不再加载\r\n                    recommendLock = false;\r\n                    this.loadRecommend();\r\n                }\r\n            },\r\n            // 轮播图,当前在第几张图片\r\n            currentHandler(e) {\r\n                // console.log(e.detail);\r\n                this.nowIndex = e.detail.current;\r\n            },\r\n            // 切换颜色\r\n            bindColorHandler(c) {\r\n                // 没该种搭配颜色禁点\r\n                if (this.disabledHandler(c, this.versionId)) {\r\n                    // 没有该种颜色型号搭配弹出提示\r\n                    wx.showToast({\r\n                        title: '亲！！没有该种搭配的货了！！',\r\n                        icon: \"none\"\r\n                    });\r\n                    return;\r\n                }\r\n                // 得到颜色编码\r\n                this.colorId = c;\r\n                // 得到该种搭配的数组\r\n                let reslut = this.allData.vo.mappingList.filter(item => item[0] == c && item[1] == this.versionId);\r\n                // console.log(reslut[0][2]);\r\n                this.detailSKU = reslut[0][2];\r\n                // 切换时图片归1,类似于页面归一\r\n                this.nowIndex = 0;\r\n                // 页面归一时无过渡效果\r\n                this.duration = 0;\r\n                this.loadData();\r\n            },\r\n            // 切换型号\r\n            bindVersionHandler(v) {\r\n                // 没该种搭配颜色禁点\r\n                if (this.disabledHandler(this.colorId, v)) {\r\n                    // 没有该种颜色型号搭配弹出提示\r\n                    wx.showToast({\r\n                        title: '亲！！没有该种搭配的货了！！',\r\n                        icon: \"none\"\r\n                    });\r\n                    return;\r\n                }\r\n                // 得到型号编码\r\n                this.versionId = v;\r\n                // 得到该种搭配的数组\r\n                let reslut = this.allData.vo.mappingList.filter(item => item[0] == this.colorId && item[1] == v);\r\n                // console.log(reslut[0][2]);\r\n                // 切换时图片归1,类似于页面归一\r\n                this.nowIndex = 0;\r\n                this.detailSKU = reslut[0][2];\r\n                // 页面归一时无过渡效果\r\n                this.duration = 0;\r\n                // 拉数据\r\n                this.loadData();\r\n            },\r\n            // 删除线事件\r\n            disabledHandler(colorId, versionId) {\r\n                // let o = this.allData.vo.mappingList.filter(item =>item[0] == colorId && item[1] == versionId)\r\n                // console.log(o);\r\n                // if(o.length == 0){\r\n                //     return true;\r\n                // }\r\n                // 开始写的时候忘了some了,后面跟老师的比对的时候,才想起,some得到的是布尔值\r\n                return !this.allData.vo.mappingList.some(item => item[0] == colorId && item[1] == versionId);\r\n            },\r\n            // 加载评论\r\n            loadComment() {\r\n                wx.request({\r\n                    url: 'http://www.zkt-it.com:5050/comment/' + this.allData.cluster + '/' + this.detailSKU,\r\n                    success: (data) => {\r\n                        console.log(data.data);\r\n                        // 在当前页面只显示三条评论\r\n                        this.commentData = data.data.slice(0, 3);\r\n                    }\r\n                })\r\n            },\r\n            // 点小图看大图\r\n            bigPics(pics, nowPic) {\r\n                // 得到pics数组\r\n                let urls = pics.map(item => `http://www.zkt-it.com:5050/pic/comment/${item}?format=950w_950h_1e_0l`);\r\n                // 得到当前图片\r\n                let current = `http://www.zkt-it.com:5050/pic/comment/${nowPic}?format=950w_950h_1e_0l`;\r\n                wx.previewImage({\r\n                    // k,v一致省略v\r\n                    urls,\r\n                    current\r\n                })\r\n            },\r\n            // 加载更多评论\r\n            loadMoreComment() {\r\n                // 跳转页面并将参数cluster和sku传递过去,语法类get请求\r\n                wx.navigateTo({\r\n                    url: '../morecomment/morecomment?cluster=' + this.allData.cluster + '&sku=' + this\r\n                        .detailSKU,\r\n                })\r\n            },\r\n            // 加载产品详情\r\n            loadParticulars() {\r\n                wx.request({\r\n                    url: 'http://www.zkt-it.com:5050/product-detail-pic-description/' + this.detailSKU,\r\n                    success: (data) => {\r\n                        // console.log(data.data);\r\n                        this.particularsPics = data.data;\r\n                    }\r\n                })\r\n            },\r\n            // 加载推荐产品\r\n            loadRecommend() {\r\n                // 拉Ajax\r\n                wx.request({\r\n                    url: \"http://www.zkt-it.com:5050/product-search?keyword=\" + this.keyword + \"&page=1&pagesize=10\",\r\n                    success: (data) => {\r\n                        // console.log(data.data.goods);\r\n                        this.goods = data.data.goods;\r\n                    }\r\n                })\r\n            },\r\n            // 返回箭头\r\n            returnHandler(){\r\n                // 测试返回\r\n                // let pages = getCurrentPages();\r\n                // console.log(pages);\r\n                // let prevPage = pages[pages.length-2];\r\n                // console.log(prevPage);\r\n                wx.navigateBack({\r\n                     delta: 1,\r\n                     success:()=>{\r\n                         console.log(\"返回成功\");\r\n                     }\r\n                })\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 固定 定位*/\r\n    .fixed-bar {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 750rpx;\r\n        height: 120px;\r\n        background-color: #f4f4f4;\r\n        z-index: 1;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: flex-end;\r\n        opacity: 0;\r\n    }\r\n\r\n    /* 显示情况 */\r\n    .fixed-bar.bar-p {\r\n        opacity: .1;\r\n        transition: opacity .1s ease 0s;\r\n    }\r\n\r\n    .fixed-bar.bar-o {\r\n        opacity: 1;\r\n        transition: opacity .5s ease 0s;\r\n    }\r\n\r\n    .fixed-bar .bar-ct {\r\n        padding: 0 0 10px;\r\n        position: relative;\r\n    }\r\n    /* 返回箭头 */\r\n    .fixed-bar .bar-ct .bar-reutrn{\r\n        height: 20px;\r\n        width: 20px;\r\n        background-image: url(../../static/return.png);\r\n        background-repeat: no-repeat;\r\n        background-size: 100% 100%;\r\n        position: absolute;\r\n        left: -180rpx;\r\n        bottom: 10px;\r\n    }\r\n    /* 固定定位里面的内容间距 */\r\n    .fixed-bar .bar-ct span {\r\n        margin-right: 20px;\r\n    }\r\n\r\n    .fixed-bar .bar-ct span:last-child {\r\n        margin-right: 0;\r\n    }\r\n\r\n    /* 页面大盒子 */\r\n    .details {\r\n        width: 750rpx;\r\n        height: 2000px;\r\n        background: linear-gradient(180deg, rgba(255, 255, 255, .3), rgba(218, 216, 216, .3));\r\n    }\r\n\r\n    /* 页面轮播图 */\r\n    .details .swiper-box {\r\n        width: 750rpx;\r\n        height: 750rpx;\r\n        position: relative;\r\n    }\r\n\r\n    /* 图片宽高 */\r\n    .details .swiper-box image {\r\n        width: 750rpx;\r\n        height: 750rpx;\r\n    }\r\n\r\n    /* 轮播图当前显示第几张图 */\r\n    .details .swiper-box .page-pt {\r\n        position: absolute;\r\n        bottom: 40rpx;\r\n        right: 20rpx;\r\n        width: 80rpx;\r\n        height: 40rpx;\r\n        line-height: 40rpx;\r\n        font-size: 20rpx;\r\n        text-align: center;\r\n        color: rgba(255, 255, 255, .7);\r\n        background-color: rgba(0, 0, 0, .3);\r\n        border-radius: 5px;\r\n    }\r\n\r\n    /* pName,price */\r\n    .details .nps-box {\r\n        width: 720rpx;\r\n        margin: 20px auto;\r\n        background-color: white;\r\n        border-radius: 15px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .details .nps-box .p-name {\r\n        font-weight: bold;\r\n        font-size: 16px;\r\n        padding: 20px 8px 5px;\r\n    }\r\n\r\n    /* 价格 */\r\n    .details .nps-box .price {\r\n        color: red;\r\n        padding: 5px 8px;\r\n        margin-top: 8px;\r\n        font-size: 20px;\r\n        border-top: 1px solid #ffeeef;\r\n        border-bottom: 1px solid #ffeeef;\r\n    }\r\n\r\n    .details .nps-box .price span {\r\n        font-size: 14px;\r\n    }\r\n\r\n    /* 苏宁自营 */\r\n    .details .nps-box .shop-name {\r\n        padding: 5px 8px 20px;\r\n        font-size: 12px;\r\n    }\r\n\r\n    /* 颜色和型号 */\r\n    .details .color-model {\r\n        width: 720rpx;\r\n        margin: 20px auto;\r\n        background-color: white;\r\n        border-radius: 15px;\r\n        padding-top: 20px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .details .color-model .cm-son {\r\n        margin-bottom: 20px;\r\n        padding: 0px 8px 0px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .details .color-model .cm-son .cm-c,\r\n    .details .color-model .cm-son .cm-m {\r\n        font-size: 12px;\r\n    }\r\n\r\n    .details .color-model .cm-son .cm-for {\r\n        display: inline-block;\r\n        margin-top: 10px;\r\n        margin-right: 15px;\r\n        background-color: #f7f7f7;\r\n        font-size: 13px;\r\n        border-radius: 15px;\r\n        padding: 5px 15px;\r\n    }\r\n\r\n    .details .color-model .cm-son .cm-for.bind-color {\r\n        border: 1px solid red;\r\n        color: red;\r\n        background-color: #fff4f6;\r\n    }\r\n\r\n    /* 删除线 */\r\n    .details .color-model .cm-son .cm-for.disabled {\r\n        text-decoration: line-through;\r\n        color: #c9c7cc;\r\n        background-color: rgba(176, 172, 172, 0.1);\r\n    }\r\n\r\n    /* 评论 */\r\n    .details .comment-box {\r\n        width: 720rpx;\r\n        margin: 20px auto;\r\n        background-color: white;\r\n        border-radius: 15px;\r\n        padding-top: 20px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .details .comment-box .cb {\r\n        font-size: 12px;\r\n        padding: 0 8px 0;\r\n        margin-bottom: 15px;\r\n        display: flex;\r\n    }\r\n\r\n    /* 加载更多 */\r\n    .details .comment-box .cb .cb-r {\r\n        margin-left: auto;\r\n        color: #C8C7CC;\r\n    }\r\n\r\n    .details .comment-box .cb .cb-r span {\r\n        margin-left: 5px;\r\n        color: #0a0a0b;\r\n    }\r\n\r\n    .details .comment-box .com-box {\r\n        padding: 0 8px 0;\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    .details .comment-box .com-box .hpn {\r\n        display: flex;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    /* 评论头像 */\r\n    .details .comment-box .com-box .hpn .head-portrait {\r\n        height: 60rpx;\r\n        width: 60rpx;\r\n        margin-right: 10px;\r\n    }\r\n\r\n    .details .comment-box .com-box .hpn .head-portrait image {\r\n        height: 60rpx;\r\n        width: 60rpx;\r\n        border-radius: 50%;\r\n    }\r\n\r\n    /* 昵称 */\r\n    .details .comment-box .com-box .hpn .nick-name {\r\n        font-size: 13px;\r\n        margin-bottom: 4px;\r\n    }\r\n\r\n    /* 几星评价 */\r\n    .details .comment-box .com-box .hpn .star {\r\n        width: 80px;\r\n        height: 14px;\r\n        background-image: url(../../static/star.png);\r\n        background-repeat: no-repeat;\r\n    }\r\n\r\n    /* 评论内容 */\r\n    .details .comment-box .com-box .content {\r\n        font-size: 14px;\r\n        text-align: justify;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    /* 评论图片 */\r\n    .details .comment-box .com-box .pics {\r\n        display: flex;\r\n        width: 750rpx;\r\n        height: 80rpx;\r\n    }\r\n\r\n    .details .comment-box .com-box .pics image {\r\n        margin-right: 10px;\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n    }\r\n\r\n    /* 详情 */\r\n    .details .shop-particulars {\r\n        width: 720rpx;\r\n        margin: 20px auto;\r\n        background-color: white;\r\n        border-radius: 15px;\r\n        padding-top: 20px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .details .shop-particulars .minutiae {\r\n        font-size: 12px;\r\n        padding: 0 8px 0;\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    .details .shop-particulars .sp-pics {\r\n        width: 720rpx;\r\n    }\r\n\r\n    .details .shop-particulars image {\r\n        width: 720rpx;\r\n    }\r\n\r\n    /* 推荐 */\r\n    .details .recommend {\r\n        width: 750rpx;\r\n        background-color: rgb(218, 216, 216, .3);\r\n        padding-top: 20px;\r\n    }\r\n\r\n    .details .recommend .rec-w {\r\n        font-size: 12px;\r\n        padding: 15rpx 8px;\r\n        margin-bottom: 15px;\r\n    }\r\n    /* 推荐产品布局 */\r\n    .details .recommend .goods-flax{\r\n        width: 720rpx;\r\n        margin: 20px auto;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content:space-between;\r\n    }\r\n    .details .recommend .goods-flax .goods{\r\n        width: 350rpx;\r\n        background-color: white;\r\n        margin-top: 20px;\r\n        border-radius: 15px;\r\n    }\r\n    .details .recommend .goods-flax .goods image{\r\n        border-radius: 15px 15px 0 0;\r\n        width: 350rpx;\r\n        height: 350rpx;\r\n    }\r\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=3e159eb4&scoped=true&lang=css&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=3e159eb4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1650013469236\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}